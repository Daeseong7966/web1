<!doctype html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>한민족얼굴대백과사전</title>
    <!-- jQuery CDN -->
    <link rel="stylesheet" href="style.css" />
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.blockUI/2.70/jquery.blockUI.min.js"></script>
    <script>
        $(function() {

            $.ajaxPrefilter(function(options, originalOptions, jqXHR) {

                if (options.crossDomain && jQuery.support.cors) {
                    options.url = "https://cors-anywhere.herokuapp.com/" + options.url;
                }

            });

            $(document).ajaxStart(function() {

                $.blockUI({

                    message: "<h1 style=\"color: #1ab394;\">Loding</h1>",
                    css: {

                        backgroundColor: "rgba(0, 0, 0, 0.0)",
                        color: "#000000",
                        border: "0px solid #000000",
                        width: "150px",
                        top: ($(window).height() - 150) / 2 + "px",
                        left: ($(window).width() - 150) / 2 + "px"

                    }

                });

            });

            $(document).ajaxStop(function() {

                $.unblockUI();

            });

        });
                
    </script>
    
    <!-- Bootstrap CDN -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!-- Jasny Bootstrap CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jasny-bootstrap/3.1.3/css/jasny-bootstrap.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jasny-bootstrap/3.1.3/js/jasny-bootstrap.min.js"></script>

    <!-- Prism CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.13.0/themes/prism.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.13.0/themes/prism-coy.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.13.0/plugins/line-numbers/prism-line-numbers.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.13.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.13.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.13.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>

        Prism.plugins.autoloader.languages_path = "https://cdnjs.cloudflare.com/ajax/libs/prism/1.13.0/components/"; 
        
        Prism.plugins.autoloader.use_minified = true; 
    
    </script>
    <script>

        $(function () {
            
            var XNaverClientId = "77AqS1keulsfQjNGw3td";
            var XNaverClientSecret = "zwqESsDm_x";
            
            $.cfrCelebrity = function () {
                
                var cfrCelebrityImage = document.getElementsByName("cfrCelebrityImage")[0].files[0];
                
                
                var formData = new FormData();
                
                formData.append("image", cfrCelebrityImage);
                
                
                $.ajax({
                    
                    crossDomain: true,
                    context: this,
                    traditional: true,
                    url: "https://openapi.naver.com/v1/vision/celebrity", 
                    method: "POST",
                    type: "POST",
                    dataType: "json",
                    contentType: false,
                    processData: false, 
                    async: true,
                    cache: true,
                    timeout : 0,
                    headers: { "X-Naver-Client-Id": XNaverClientId, "X-Naver-Client-Secret": XNaverClientSecret },
                    data: formData,
                    beforeSend: function (jqXHR, settings) { 
                        
                        jqXHR.setRequestHeader("x-requested-with", "*"); 
                        
                    }, 
                    success: function (data, textStatus, jqXHR) {
                            if (data != null) {
                            var cfrCelebrityResponseCode = JSON.stringify(data, null, "\t");
                            
                            var cfrCelebrityResponsePrismCode = "";
                            cfrCelebrityResponsePrismCode += "<pre class=\"line-numbers\"><code class=\"language-json\">";
                            cfrCelebrityResponsePrismCode += cfrCelebrityResponseCode.replace(/[&]/g, "&amp;").replace(/[<]/g, "&lt;").replace(/[>]/g, "&gt;");
                            
                            cfrCelebrityResponsePrismCode += "</code></pre>";
                            $("#cfrCelebrityResponseCode").val(cfrCelebrityResponseCode);
                            $("#cfrCelebrityResponsePrismCode").html(cfrCelebrityResponsePrismCode); Prism.highlightAll();
                            
                            console.log(cfrCelebrityResponseCode);
                           
                            var reader = new FileReader();
                            reader.onload = function (e) {
                                document.getElementById("image").setAttribute("src", e.target.result);
                            }
                            reader.readAsDataURL(cfrCelebrityImage);
                        } 
                    
                    }, 
                    error: function (jqXHR, textStatus, errorThrown) { 
                        var errorResponseCode = ""; 
                        
                        errorResponseCode += "readyState : ";
                        errorResponseCode += jqXHR.readyState; 
                        if ("0" == jqXHR.readyState) {
                            errorResponseCode += "-UNSENT";
                        } 
                        
                        if ("1" == jqXHR.readyState) { 
                            errorResponseCode += "-OPENED"; 
                        } 
                        
                        if ("2" == jqXHR.readyState) {
                            errorResponseCode += "-HEADERS_RECEIVED";
                        }
                        
                        if ("3" == jqXHR.readyState) {
                            errorResponseCode += "-LOADING";
                        } 
                        
                        if ("4" == jqXHR.readyState) {
                            errorResponseCode += "-DONE";
                        } 
                        
                        errorResponseCode += "\n"; 
                        errorResponseCode += "status : "; 
                        errorResponseCode += jqXHR.status; 
                        errorResponseCode += "\n"; 
                        errorResponseCode += "statusText : "; 
                        errorResponseCode += jqXHR.statusText; 
                        errorResponseCode += "\n"; 
                        errorResponseCode += "textStatus : "; 
                        errorResponseCode += textStatus; 
                        errorResponseCode += "\n"; 
                        errorResponseCode += "errorThrown : "; 
                        errorResponseCode += errorThrown; 
                        errorResponseCode += "\n"; 
                        errorResponseCode += "responseText : "; 
                        errorResponseCode += (jqXHR.responseText == null ? "" : jqXHR.responseText.replace(/\r/g, "").replace(/\n/g, "")); 
                        alert(errorResponseCode); 
                    }, complete: function (jqXHR, textStatus) {
                    } 
                });
            }; 
        });
        
    </script>
</head>


<body style="background-color:#fffcf9;">
    <div id="Logo">
        <img id="Mainlogo" src="mainlogo.png" />
    </div>
    
    <button type="button" class="Tech_Team" onclick="alert('사용기술 및 팀소개 페이지가 개발 진행 중 입니다')">사용기술 및 팀소개</button>
    
    <div id="Main">
        <div class = "form-control" id="cfrCelebrityResponseCode" name="cfrCelebrityResponseCode">
        </div>
        <img src="" width="auto" height="200" id= "image"/>
        
        <input type="text" name="InputName" class="Name" value="이름 입력">
        <div class="Upload">
                <button class="replace">불러오기</button><input type="file" name="cfrCelebrityImage" class="upload" >
        </div>
        
        <button class="btn-btn-primary" type="button" onclick="$.cfrCelebrity();">유명인 얼굴 인식</button>
        
    </div>
    
    <div id="Contact_Us">
        <div class="Contact">Contact Us</div>
        
        <div class="DGSW">
            <img id="Mark" src="placeholder.png" />대구소프트웨어고등학교
        </div>
        
        <div class="E-mail">
            <img id="Mail" src="envelope.png" />bigstar7966@dgsw.hs.kr
        </div>
        
        <div class="Call">
            <img id="Phone" src="black-telephone-auricular-.png" />010-5567-7966
        </div>
    </div>
</body>

</html>
